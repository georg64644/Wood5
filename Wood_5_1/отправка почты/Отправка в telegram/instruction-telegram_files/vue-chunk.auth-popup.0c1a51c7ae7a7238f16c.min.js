(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{1e3:function(t,e,n){var i=n(1244);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n(29).default)("291ee552",i,!1,{})},1001:function(t,e,n){var i=n(1246);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n(29).default)("78ab3ed8",i,!1,{})},1235:function(t,e,n){"use strict";n(996)},1236:function(t,e,n){(e=n(28)(!1)).push([t.i,".v-form.auth-social__confirm {\n  --font-size: 18px;\n}\n.auth-social .v-button__icon--new:not(:only-child) {\n  margin-right: calc(var(--offset) * -0.5 - var(--icon-size));\n}\n",""]),t.exports=e},1237:function(t,e,n){"use strict";n(997)},1238:function(t,e,n){(e=n(28)(!1)).push([t.i,":root {\n/**\n   * Raw height of the Mobile App bar (without safe-area-inset)\n   */\n  --mobile-bar-height-raw: 50px;\n/**\n   * Height of the Mobile App Bar\n   */\n  --mobile-bar-height: calc(var(--mobile-bar-height-raw) + env(safe-area-inset-bottom));\n/**\n   * Height of the App Redirect block for anon users\n   */\n  --mobile-app-redirect-height: 56px;\n}\n.auth-social-confirm__button {\n  width: 100%;\n  margin-bottom: 16px;\n}\n.auth-social-confirm__header {\n  font-size: 28px;\n  font-weight: 500;\n  line-height: 36px;\n  margin-bottom: 32px;\n}\n.auth-social-confirm__body {\n  font-size: 18px;\n}\n.auth__legal {\n  margin-top: auto;\n  min-height: 22px;\n}\n.auth-social .v-form__title {\n  margin-top: 114px;\n}\n.auth-social__container {\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  grid-gap: 16px;\n  -webkit-column-gap: 12px;\n  -moz-column-gap: 12px;\n  column-gap: 12px;\n}\n.auth-social__button {\n  --font-size: 16px;\n  position: relative;\n}\n.auth-social__button--with-label {\n  grid-column: span 3;\n}\n.auth-social__button--fb {\n  overflow: hidden;\n}\n.auth-social__hint-text {\n  color: #595959;\n}\n.auth-social-fb {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  pointer-events: none;\n}\n@media (max-width: 859px) {\n.auth-social-fb {\n    display: none;\n}\n}\n.auth-social-fb iframe {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  pointer-events: none;\n}\n",""]),t.exports=e},1239:function(t,e,n){"use strict";n(998)},1240:function(t,e,n){(e=n(28)(!1)).push([t.i,':root {\n/**\n   * Raw height of the Mobile App bar (without safe-area-inset)\n   */\n  --mobile-bar-height-raw: 50px;\n/**\n   * Height of the Mobile App Bar\n   */\n  --mobile-bar-height: calc(var(--mobile-bar-height-raw) + env(safe-area-inset-bottom));\n/**\n   * Height of the App Redirect block for anon users\n   */\n  --mobile-app-redirect-height: 56px;\n}\n@media (min-width: 860px) {\n.auth-form--email-registration .v-form__title {\n    margin-top: 60px;\n}\n.auth-form--recovery .v-form__title,\n  .auth-form--password-new .v-form__title,\n  .auth-form--email-login .v-form__title {\n    margin-top: 114px;\n}\n}\n.auth-form .v-text-input {\n  --height: 46px;\n}\n.auth-form input:-webkit-autofill,\n.auth-form input:-webkit-autofill:hover,\n.auth-form input:-webkit-autofill:focus,\n.auth-form input:-internal-autofill-selected {\n  -webkit-box-shadow: 0 0 0px 1000px transparent inset;\n  -webkit-transition: background-color 5000s ease-in-out 0s;\n  transition: background-color 5000s ease-in-out 0s;\n}\n.auth-form input:-webkit-autofill::first-line {\n  font-size: 16px;\n}\n/**\n * Fix for reCaptcha popup positioning on mobile devices\n */\n@media (max-width: 859px) {\niframe[src^="https://www.google.com/recaptcha/api2/bframe"] {\n    position: fixed;\n    bottom: 0;\n}\n}\n',""]),t.exports=e},1241:function(t,e,n){"use strict";n(999)},1242:function(t,e,n){(e=n(28)(!1)).push([t.i,"[data-v-4b8ffc2e]:root {\n/**\n   * Raw height of the Mobile App bar (without safe-area-inset)\n   */\n  --mobile-bar-height-raw: 50px;\n/**\n   * Height of the Mobile App Bar\n   */\n  --mobile-bar-height: calc(var(--mobile-bar-height-raw) + env(safe-area-inset-bottom));\n/**\n   * Height of the App Redirect block for anon users\n   */\n  --mobile-app-redirect-height: 56px;\n}\n@media (max-width: 859px) {\n.auth-recaptcha[data-v-4b8ffc2e] {\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-pack: center;\n    justify-content: center;\n}\n}\n.form-item[data-v-4b8ffc2e] {\n  line-height: 24px;\n  margin-bottom: 1rem;\n}\n.submit-button[data-v-4b8ffc2e] {\n  width: 100%;\n}\n@media (max-width: 859px) {\n.submit-button[data-v-4b8ffc2e] {\n    margin-bottom: 24px;\n}\n}\n.form__legal[data-v-4b8ffc2e] {\n  margin-top: auto;\n}\n.auth-email-recover[data-v-4b8ffc2e] {\n  margin-left: auto;\n  color: #595959;\n  border-bottom: 1px dotted rgba(89,89,89,0.5);\n  font-size: 13px;\n  line-height: 1.3em;\n  cursor: pointer;\n}\n@media (max-width: 859px) {\n.auth-email-recover[data-v-4b8ffc2e] {\n    margin-left: 0;\n    margin-top: 12px;\n}\n}\n.auth-email-recover[data-v-4b8ffc2e]:hover {\n  color: #cd192e;\n  border-bottom-color: rgba(205,25,46,0.5);\n}\n.auth-form__hint-text[data-v-4b8ffc2e] {\n  color: #595959;\n  margin-right: 1px;\n}\n",""]),t.exports=e},1243:function(t,e,n){"use strict";n(1e3)},1244:function(t,e,n){(e=n(28)(!1)).push([t.i,".auth .v-form {\n  --font-size: 16px;\n}\n.auth .v-button {\n  --offset: 16px;\n  --font-size: 16px;\n  --height: 48px;\n}\n",""]),t.exports=e},1245:function(t,e,n){"use strict";n(1001)},1246:function(t,e,n){(e=n(28)(!1)).push([t.i,":root {\n/**\n   * Raw height of the Mobile App bar (without safe-area-inset)\n   */\n  --mobile-bar-height-raw: 50px;\n/**\n   * Height of the Mobile App Bar\n   */\n  --mobile-bar-height: calc(var(--mobile-bar-height-raw) + env(safe-area-inset-bottom));\n/**\n   * Height of the App Redirect block for anon users\n   */\n  --mobile-app-redirect-height: 56px;\n}\n.auth {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n  flex-direction: column;\n  -ms-flex-pack: justify;\n  justify-content: space-between;\n  padding: 24px 50px 24px 50px;\n  margin: -30px;\n  min-height: 600px;\n}\n@media (max-width: 859px) {\n.auth {\n    -ms-flex-positive: 1;\n    flex-grow: 1;\n    text-align: center;\n    padding: 24px 16px;\n    margin: -20px;\n    min-height: 100%;\n    overflow: auto;\n}\n.auth .v-field__error {\n    text-align: start;\n}\n.auth__view {\n    -ms-flex-positive: 1;\n    flex-grow: 1;\n    -ms-flex-negative: 0;\n    flex-shrink: 0;\n}\n}\n.auth__site-logo {\n  display: none;\n  margin-top: 72px;\n  margin-bottom: 20px;\n  margin-left: auto;\n  margin-right: auto;\n  width: -webkit-fit-content;\n  width: -moz-fit-content;\n  width: fit-content;\n  background: #fff5f7;\n  padding: 12px;\n  border-radius: 20px;\n  border: 2px solid rgba(0,0,0,0.05);\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  width: 80px;\n  height: 80px;\n  -ms-flex-pack: center;\n  justify-content: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -ms-flex-negative: 0;\n  flex-shrink: 0;\n}\n.auth__site-logo .icon {\n  display: block;\n}\n@media (max-width: 859px) {\n.auth__site-logo {\n    display: -ms-flexbox;\n    display: flex;\n}\n}\n@media (max-width: 320px) {\n.auth__site-logo {\n    display: none;\n}\n}\n.auth__controls-container {\n  background: #fff;\n  z-index: 9;\n  display: -ms-flexbox;\n  display: flex;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  border-radius: 0 8px 0 0;\n}\n@media (max-width: 859px) {\n.auth__controls-container {\n    position: fixed;\n}\n}\n.auth__back {\n  margin: 18px 20px;\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n  -ms-flex-align: center;\n  align-items: center;\n  font-size: 16px;\n  line-height: 1.3em;\n  color: #000;\n  opacity: 0.5;\n}\n@media (max-width: 859px) {\n.auth__back {\n    margin: 16px;\n}\n}\n.auth__back--desktop {\n  display: -ms-flexbox;\n  display: flex;\n}\n.auth__back--desktop .icon {\n  margin-right: 10px;\n}\n@media (max-width: 859px) {\n.auth__back--desktop {\n    display: none;\n}\n}\n.auth__back--mobile {\n  display: none;\n}\n@media (max-width: 859px) {\n.auth__back--mobile {\n    display: block;\n}\n}\n.auth__service-message {\n  margin-top: 118px;\n}\n@media (max-width: 859px) {\n.auth__service-message {\n    margin-top: 4px;\n    margin-bottom: auto;\n}\n}\n.auth__service-message .message__title {\n  font-size: 24px;\n  line-height: 1.2em;\n  font-weight: 500;\n  margin-bottom: 20px;\n}\n@media (max-width: 859px) {\n.auth__service-message .message__title {\n    font-size: 28px;\n    margin-bottom: 35px;\n}\n}\n.auth__service-message .message__body {\n  font-size: 18px;\n  line-height: 26px;\n}\n.auth__service-message .message-restore__button {\n  width: 100%;\n  margin-top: 24px;\n}\n.auth .v-form {\n  -ms-flex-positive: 1;\n  flex-grow: 1;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n  flex-direction: column;\n}\n@media (max-width: 859px) {\n.auth .v-form {\n    min-height: unset;\n}\n}\n.auth .v-form__title {\n  font-size: 24px;\n  line-height: 36px;\n  margin-bottom: 16px;\n}\n@media (max-width: 859px) {\n.auth .v-form__title {\n    margin-top: 0;\n    margin-bottom: 32px;\n    font-size: 28px;\n    line-height: 40px;\n}\n}\n@media (max-width: 320px) {\n.auth .v-form__title {\n    margin-top: 56px;\n}\n}\n@media (min-width: 860px) {\n.auth .v-form__content:first-child {\n    margin-top: auto;\n}\n.auth .v-form__content:last-child {\n    margin-bottom: auto;\n}\n.auth .v-form__content p:first-child {\n    margin-top: -12px;\n}\n}\n.auth .v-form__footer {\n  -ms-flex-align: center;\n  align-items: center;\n  margin-top: 16px;\n}\n@media (max-width: 859px) {\n.auth .v-form__footer {\n    -ms-flex-direction: column;\n    flex-direction: column;\n    margin-top: 24px;\n}\n}\n.auth .v-form__footer .v-button {\n  min-width: 0;\n}\n@media (max-width: 859px) {\n.auth .v-form__footer .v-button {\n    -ms-flex-item-align: stretch;\n    align-self: stretch;\n}\n}\n.auth .v-form__footer .v-button:last-child {\n  margin-left: 0;\n}\n.auth .v-form .v-button {\n  --height: 48px;\n}\n.auth .v-form__legal {\n  margin-top: auto;\n}\n.button--clear-defaults {\n  background: none;\n  border: none;\n  padding: 0;\n  font-size: inherit;\n  cursor: pointer;\n}\n",""]),t.exports=e},129:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return a}));const i=403,a=401},140:function(t,e,n){"use strict";function i(t="/"){const e=document.location.protocol,n=document.location.hostname;return["/auth/simple/recover/request","/auth/simple/recover","/auth/simple/recover/do","/auth/check","/auth/twitter"].includes(t)?t:("/"!==t[0]&&(t="/"+t),`${e}//api.${n}/v3.0${t}`)}n.d(e,"a",(function(){return i}))},224:function(t,e,n){"use strict";n.r(e);var i=n(23),a=n(9),o=n(0),s=n(11),r=n.n(s),l=n(87),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"auth"},[n("div",{staticClass:"auth__controls-container"},[t.shouldDisplayBackButton?n("button",{staticClass:"auth__back button--clear-defaults",attrs:{"data-gtm":t.backBtnAnalyticsEvents[t.activeScreen]},on:{click:function(e){return t.back()}}},[n("icon",{staticClass:"auth__back--mobile",attrs:{name:"v_arrow_long_left",width:"24",height:"24"}}),t._v(" "),n("div",{staticClass:"auth__back--desktop"},[n("icon",{attrs:{name:"v_arrow_left",width:"20",height:"20"}}),t._v(" "),n("div",[n("translate",[t._v("\n            Back\n          ")])],1)],1)],1):t._e()]),t._v(" "),n("div",{staticClass:"auth__site-logo",domProps:{innerHTML:t._s(t.siteLogo)}}),t._v(" "),t.shouldDisplayAuthViaSocial?n("auth-social",{staticClass:"auth__view",attrs:{type:t.activeScreen,"is-email-login-enabled":t.isEmailLoginEnabled},on:{"change-screen":t.setActiveScreen,"need-restore":t.showRestoreScreen,success:t.onSuccess,error:t.onError}}):t.shouldDisplayMessage||t.shouldDisplayRestoreAccount?n("div",{staticClass:"auth__service-message"},[t.messageTitle?n("h2",{staticClass:"message__title"},[t._v("\n      "+t._s(t.messageTitle)+"\n    ")]):t._e(),t._v(" "),n("p",{staticClass:"message__body"},[t._v("\n      "+t._s(t.messageBody)+"\n    ")]),t._v(" "),t.shouldDisplayRestoreAccount?n("layout-button",{staticClass:"message-restore__button",attrs:{type:"blue"},on:{click:t.restoreClick}},[t._v("\n      Восстановить\n    ")]):t._e()],1):n("auth-form",{key:t.activeScreen,staticClass:"auth__view",attrs:{type:t.activeScreen,"form-data":t.formData[t.activeScreen],"is-email-login-enabled":t.isEmailLoginEnabled,"is-email-registration-enabled":t.isEmailRegistrationEnabled},on:{"change-screen":t.setActiveScreen,"need-restore":t.showRestoreScreen,success:t.handlers.onSuccess,error:t.handlers.onError}})],1)};c._withStripped=!0;var u=n(30),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.type===t.Screen.LinkSocial?n("layout-form",{staticClass:"auth-social__confirm"},[n("div",{staticClass:"auth-social-confirm"},[n("h2",{staticClass:"auth-social-confirm__header"},[n("translate",[t._v("Email already registered")])],1),t._v(" "),n("p",{staticClass:"auth-social-confirm__body"},[n("translate",{attrs:{"translate-params":{socialLabel:t.socialsLabels[t.errorData.socialName],linkedSubsiteName:t.errorData.linkedSubsiteName}}},[t._v("\n        Do you want to link %{socialLabel} to account %{linkedSubsiteName}? It will allow you to sign in to the site via this social media account\n      ")])],1),t._v(" "),n("layout-button",{staticClass:"auth-social-confirm__button",attrs:{type:"blue",loading:t.isLoading},on:{click:function(e){return t.linkSocialToExistingAccount(t.errorData.socialName)}}},[n("translate",[t._v("\n        Link and sign in\n      ")])],1),t._v(" "),n("layout-button",{staticClass:"auth-social-confirm__button",on:{click:function(e){return t.$emit("change-screen",t.Screen.SocialRegistration)}}},[n("translate",[t._v("Cancel")])],1)],1)]):n("layout-form",{staticClass:"auth-social",attrs:{title:t.title},scopedSlots:t._u([{key:"footer",fn:function(){return[t.type===t.Screen.SocialRegistration?[n("span",[n("span",{staticClass:"auth-social__hint-text"},[n("translate",[t._v("\n            Already have an account?\n          ")])],1),t._v(" "),n("button",{staticClass:"t-link-inline",attrs:{"data-gtm":"Signup — Login — Click"},on:{click:function(e){return t.$emit("change-screen",t.Screen.SocialLogin)}}},[n("translate",[t._v("\n            Log in\n          ")])],1)])]:[n("button",{staticClass:"t-link-inline",attrs:{"data-gtm":"Login — Signup — Click"},on:{click:function(e){return t.$emit("change-screen",t.Screen.SocialRegistration)}}},[n("translate",{attrs:{"translate-context":"Noun"}},[t._v("\n          Sign up\n        ")])],1)]]},proxy:!0},{key:"bottom",fn:function(){return[n("div",{staticClass:"auth__legal",domProps:{innerHTML:t._s(t.legalNote)}})]},proxy:!0}])},[n("div",{staticClass:"auth-social__container"},t._l(t.buttons,(function(e){return n("layout-button",{key:e.name,class:["auth-social__button","auth-social__button--"+e.name,{"auth-social__button--with-label":!e.labelHidden&&t.socialsLabels[e.name]}],attrs:{"data-gtm":t.analyticsEvents.buttonClick[e.name],size:"default",icon:e.icon,"icon-size":24,"data-social":e.name},on:{click:function(t){return e.onClick(e.name)}}},[e.labelHidden?t._e():[t._v("\n        "+t._s(t.socialsLabels[e.name])+"\n      ")],t._v(" "),t.isNativeFacebookButtonEnabled&&"fb"===e.name&&!e.labelHidden?n("div",{staticClass:"auth-social-fb"},[n("iframe",{attrs:{src:"/auth/fb-login",scrolling:"no"}})]):t._e()],2)})),1)])};h._withStripped=!0;var p=n(573),m=n(553),d=n(755),f=n(129),g={name:"auth-social",components:{LayoutForm:p.a,LayoutButton:m.a},props:{isEmailLoginEnabled:{type:Boolean,default:!0},isNativeFacebookButtonEnabled:{type:Boolean,default:!0},type:{type:String,default:d.a.SocialRegistration,validator:t=>[d.a.SocialRegistration,d.a.SocialLogin,d.a.LinkSocial].includes(t)}},data:()=>({moduleAuth:null,Screen:d.a,errorData:{}}),computed:{screens(){return{[d.a.SocialRegistration]:{title:this.$pgettext("Noun","Sign up"),legalNote:`\n            <a class="t-link-inline" href="/terms" data-no-ajax data-gtm="Signup — Rules — Click" target="_blank">\n              ${this.$gettext("Terms of usage")}\n            </a>`,buttonClickHandlers:{email:()=>{this.$emit("change-screen",d.a.EmailRegistration)},socialMedia:async(t,e)=>{try{await this.moduleAuth.signinBySocial(t,e),this.$emit("success",t)}catch({data:e,message:n}){e?e.code===f.b?this.$emit("need-restore",{socialName:t,frozenUntil:e.frozenUntil,isSocialLoginMode:!0}):(this.errorData={socialName:t,linkedSubsiteName:e.linked_subsite_name},this.$emit("change-screen",d.a.LinkSocial)):this.$emit("error",n)}}},analyticsEvents:{buttonClick:{fb:"Signup — FB — Click",gg:"Signup — Google — Click",vk:"Signup — VK — Click",tw:"Signup — Twitter — Click",apple:"Signup — Apple — Click",email:"Signup — Mail — Click"}}},[d.a.SocialLogin]:{title:this.$gettext("Log in to account"),buttonClickHandlers:{email:()=>{this.$emit("change-screen",d.a.EmailLogin)},socialMedia:async t=>{try{await this.moduleAuth.signinBySocial(t),this.$emit("success",t)}catch(e){e.data.code===f.b?this.$emit("need-restore",{socialName:t,frozenUntil:e.data.frozenUntil,isSocialLoginMode:!0}):this.$emit("error",e.message)}}},analyticsEvents:{buttonClick:{fb:"Login — FB — Click",gg:"Login — Google — Click",vk:"Login — VK — Click",tw:"Login — Twitter — Click",apple:"Login — Apple — Click",email:"Login — Mail — Click"}}}}},title(){return this.screens[this.type].title},legalNote(){return this.screens[this.type].legalNote},clickHandlers(){return this.screens[this.type].buttonClickHandlers},analyticsEvents(){return this.screens[this.type].analyticsEvents},buttons(){const t=this.clickHandlers.socialMedia,e=["fb","vk","tw"],n=[{name:"fb",icon:"v_facebook",onClick:t},{name:"gg",icon:"v_google",onClick:t},{name:"vk",icon:"v_vkontakte",onClick:t},{name:"tw",icon:"v_twitter",onClick:t},{name:"apple",icon:"v_apple",onClick:t}];this.isEmailLoginEnabled&&n.push({name:"email",icon:"v_email",onClick:this.clickHandlers.email});const a=Object(i.e)(n,"name",window.__auth_buttons);if(this.type===d.a.SocialRegistration)for(let t=a.length-1;t>=0;t--)e.includes(a[t].name)&&a.splice(t,1);else a.forEach((t,e)=>{e+1>n.length-3&&(t.labelHidden=!0)});return a},socialsLabels(){return{fb:"Facebook",gg:"Google",vk:this.$gettext("VK"),tw:"Twitter",apple:"Apple",email:this.$gettext("Email")}}},created(){this.moduleAuth=Air.import("module.auth")},methods:{async linkSocialToExistingAccount(t){try{await this.moduleAuth.signinBySocial(t,"?link=1"),this.$emit("success",t)}catch({message:t}){this.$emit("error",t)}}}},_=(n(1235),n(1237),n(14)),b=Object(_.a)(g,h,[],!1,null,null,null);b.options.__file="src/Components/Auth/vue/auth-social.vue";var v=b.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("layout-form",{staticClass:"auth-form",class:t.config[t.type].class,attrs:{title:t.title},scopedSlots:t._u([{key:"bottom",fn:function(){return[n("div",{staticClass:"form__legal",domProps:{innerHTML:t._s(t.legalNote)}})]},proxy:!0}])},[t._l(t.config[t.type].fields,(function(e){return[e.hidden?t._e():n("text-input",{key:e.name,ref:"input",refInFor:!0,staticClass:"form-item",attrs:{name:e.name,type:e.type,placeholder:e.placeholder,autofocus:e.autofocus,required:e.required,"is-disabled":t.isLoading,error:t.errors[e.name],"is-invalid":e.name in t.errors,maxlength:e.maxlength},on:{enter:t.submitIfEnabled},model:{value:t.values[e.name],callback:function(n){t.$set(t.values,e.name,n)},expression:"values[field.name]"}})]})),t._v(" "),t.type===t.Screen.EmailRegistration?n("div",{staticClass:"auth-recaptcha form-item"},[n("vue-recaptcha",{attrs:{sitekey:t.recaptchaSiteKey,"load-recaptcha-script":!0},on:{verify:t.onRecaptchaVerify,expired:t.onRecaptchaError,error:t.onRecaptchaError}})],1):t._e(),t._v(" "),n("layout-button",{staticClass:"submit-button form-item",attrs:{"data-gtm":t.analyticsEvents.submitClick,type:"blue",loading:t.isLoading,disabled:t.submitDisabled},on:{click:t.submit}},[t._v("\n    "+t._s(t.config[t.type].submitLabel)+"\n  ")]),t._v(" "),t.type===t.Screen.EmailLogin?n("button",{staticClass:"t-link-inline form-item",attrs:{"data-gtm":"Login Mail — Recover — Click"},on:{click:function(e){return t.$emit("change-screen",t.Screen.PasswordRecovery)}}},[n("translate",[t._v("Forgot password?")])],1):t._e(),t._v(" "),t.type===t.Screen.EmailLogin?n("p",[n("button",{staticClass:"t-link-inline",attrs:{"data-gtm":"Login Mail — Signup — Click"},on:{click:function(e){return t.$emit("change-screen",t.Screen.SocialRegistration)}}},[n("translate",{attrs:{"translate-context":"Noun"}},[t._v("\n        Sign up\n      ")])],1)]):t._e(),t._v(" "),t.type===t.Screen.EmailRegistration?n("p",[n("span",{staticClass:"auth-form__hint-text"},[n("translate",[t._v("\n        Already have an account?\n      ")])],1),t._v(" "),n("button",{staticClass:"t-link-inline",attrs:{"data-gtm":"Signup Mail — Login — Click"},on:{click:function(e){return t.$emit("change-screen",t.Screen.SocialLogin)}}},[n("translate",[t._v("\n        Log in\n      ")])],1)]):t._e(),t._v(" "),t.type===t.Screen.PasswordRecovery?n("p",[n("button",{staticClass:"button--clear-defaults t-link-inline",attrs:{"data-gtm":"Login Recover — Signup — Click"},on:{click:function(e){return t.$emit("change-screen",t.Screen.SocialRegistration)}}},[n("translate",{attrs:{"translate-context":"Noun"}},[t._v("\n        Sign up\n      ")])],1)]):t._e()],2)};x._withStripped=!0;var y=n(862),w=n(3),k=n(556),S=n(8),C=n(140),E={name:"auth-form",components:{VueRecaptcha:y.a,LayoutForm:p.a,LayoutButton:m.a,TextInput:k.default},props:{type:{type:String,required:!0},formData:{type:Object,default:()=>({})},isEmailLoginEnabled:{type:Boolean,default:!0},isEmailRegistrationEnabled:{type:Boolean,default:!0}},data:()=>({values:{},isLoading:!1,recaptchaSiteKey:"6LeORG8UAAAAABnuR9TYdmoHmBjAS4GhEAqDHoTr",errors:{},Screen:d.a}),computed:{config(){return{[d.a.EmailLogin]:{title:this.$gettext("Log in to account"),endpoint:"/auth/simple/login",class:"auth-form--email-login",fields:[{name:"email",type:"email",placeholder:this.$gettext("Email"),autofocus:!0,required:!0},{name:"password",type:"password",placeholder:this.$gettext("Password"),required:!0}],submitLabel:this.$gettext("Log in"),analyticsEvents:{submitClick:"Login Mail — Login — Click"}},[d.a.EmailRegistration]:{title:this.$pgettext("Noun","Sign up"),legalNote:`\n            <a class="t-link-inline" href="/terms" data-no-ajax data-gtm="Signup Mail — Rules — Click">\n              ${this.$gettext("Terms of usage")}\n            </a>`,endpoint:"/auth/simple/register/request",class:"auth-form--email-registration",fields:[{name:"name",type:"text",placeholder:this.$gettext("Name and surname"),maxlength:30,autofocus:!0,required:!0},{name:"email",type:"email",placeholder:this.$gettext("Email"),required:!0},{name:"password",type:"password",placeholder:this.$gettext("Password"),required:!0},{name:"captcha",hidden:!0}],submitLabel:this.$gettext("Sign up"),analyticsEvents:{submitClick:"Signup Mail — Signup — Click"}},[d.a.PasswordRecovery]:{title:this.$gettext("Recover password"),endpoint:"/auth/simple/recover/request",class:"auth-form--recovery",fields:[{name:"email",type:"email",placeholder:this.$gettext("Email"),autofocus:!0,required:!0}],submitLabel:this.$gettext("Submit"),analyticsEvents:{submitClick:"Login Recover — Recover — Click"}},[d.a.PasswordNew]:{title:this.$gettext("Change password"),endpoint:"/auth/simple/recover/do",class:"auth-form--password-new",fields:[{name:"password",type:"password",placeholder:this.$gettext("New password"),autofocus:!0},{name:"password-confirm",type:"password",placeholder:this.$gettext("Confirm password")}],submitLabel:this.$gettext("Change password")}}},title(){return this.config[this.type].title},legalNote(){return this.config[this.type].legalNote},endpoint(){return Object(C.a)(this.config[this.type].endpoint)},isValid(){return!Object.keys(this.errors).length},analyticsEvents(){return this.config[this.type].analyticsEvents||{}},submitDisabled(){return!this.formIsFilled},formIsFilled(){return this.config[this.type].fields.every(t=>!!this.values[t.name])},requestData(){return{...this.config[this.type].fields.reduce((t,e)=>({...t,[e.name]:this.values[e.name]}),{}),...this.formData}}},methods:{getValidationErrors(t,e){const n={};return t.forEach(t=>{const i=e[t.name]&&e[t.name].trim();t.name in e&&(t.required&&""===i?n[t.name]=this.$gettext("Field is required"):"email"!==t.type||Object(S.isEmail)(i)||(n[t.name]=this.$gettext("Invalid email")))}),n},getServerValidationErrors(t,e){const n={};return t.forEach((i,a)=>{a===t.length-1?n[i]=e:n[i]=""}),n},async submit(){if(this.errors=this.getValidationErrors(this.config[this.type].fields,this.values),this.isValid&&!this.isLoading){this.isLoading=!0;try{const t=await Object(w.e)({type:"POST",url:this.endpoint,data:{values:this.requestData},ignore_error_notify:!0});this.$emit("success","email",t)}catch({data:t,message:e,code:n}){if(n===f.b)return void this.$emit("need-restore",{dataTologin:this.requestData,frozenUntil:t.frozenUntil});t&&t.errorFields?this.errors=this.getServerValidationErrors(t.errorFields,e):(this.$notify({type:"error",message:e}),this.$emit("error",e))}finally{this.isLoading=!1}}},submitIfEnabled(){this.submitDisabled||this.submit()},onRecaptchaVerify(t){r.a.set(this.values,"captcha",t)},onRecaptchaError(){this.values.captcha=""}}},L=(n(1239),n(1241),Object(_.a)(E,x,[],!1,null,"4b8ffc2e",null));L.options.__file="src/Components/Auth/vue/auth-form.vue";var $=L.exports,R=n(22),A=n(10),z={name:"auth",components:{Icon:u.a,AuthSocial:v,AuthForm:$,LayoutButton:m.a},props:{screen:{type:String,default:d.a.SocialRegistration},formData:{type:Object,default:()=>({})},onSuccess:{type:Function,default:()=>!1},onError:{type:Function,default:()=>!1}},data(){return{moduleAuth:null,activeScreen:this.screen,screensHistory:[],isEmailLoginEnabled:window.__email_auth,isEmailRegistrationEnabled:window.__email_registration,messageBody:"",messageTitle:"",isSocialLoginMode:!1,socialName:"",frozenUntil:0,Screen:d.a}},computed:{formsEventsHandlers(){return{[d.a.EmailLogin]:{onSuccess:this.onSuccess,onError:this.onError},[d.a.EmailRegistration]:{onSuccess:(t,e)=>{this.messageBody=e.message,this.messageTitle=e.title,this.setActiveScreen(d.a.Message)},onError:this.onError},[d.a.PasswordRecovery]:{onSuccess:(t,e)=>{this.messageBody=e.message,this.messageTitle=e.title,this.setActiveScreen(d.a.Message)},onError:this.onError},[d.a.PasswordNew]:{onSuccess:(t,e)=>{this.$notify({type:"success",message:e.message}),this.onSuccess("email")},onError:this.onError}}},backBtnAnalyticsEvents:()=>({[d.a.EmailRegistration]:"Signup Mail — Back — Click",[d.a.EmailLogin]:"Login Mail — Back — Click",[d.a.PasswordRecovery]:"Login Recover — Back — Click"}),xButtonAnalyticsEvent:()=>({[d.a.SocialRegistration]:"Signup — Close — Click",[d.a.SocialLogin]:"Login — Close — Click",[d.a.EmailRegistration]:"Signup Mail — Close — Click",[d.a.EmailLogin]:"Login Mail — Close — Click",[d.a.PasswordRecovery]:"Login Recover — Close — Click"}),handlers(){return this.formsEventsHandlers[this.activeScreen]||{}},shouldDisplayBackButton(){return![d.a.SocialRegistration,d.a.SocialLogin,d.a.PasswordNew].includes(this.activeScreen)},shouldDisplayAuthViaSocial(){return this.activeScreen===d.a.SocialRegistration||this.activeScreen===d.a.SocialLogin||this.activeScreen===d.a.LinkSocial},shouldDisplayMessage(){return this.activeScreen===d.a.Message},shouldDisplayRestoreAccount(){return this.activeScreen===d.a.RestoreAccount},siteLogo:()=>Object(o.svgHtml)("site_logo","56px","56px")},mounted(){this.$popup.on("close",this.onExitClick)},beforeDestroy(){this.$popup.off("close",this.onExitClick)},methods:{setActiveScreen(t){this.screensHistory.push(this.activeScreen),this.activeScreen=t},showRestoreScreen({socialName:t,frozenUntil:e,dataTologin:n,isSocialLoginMode:i=!1}){this.isSocialLoginMode=i,i?(this.moduleAuth=Air.import("module.auth"),this.socialName=t):this.dataTologin=n,this.frozenUntil=e;const a=Object(R.q)(this.frozenUntil);this.messageTitle="Аккаунт заморожен",this.messageBody=`Заморозка действует до ${a.getDate()} ${Object(R.j)(a)}. После чего аккаунт будет полностью удален`,this.setActiveScreen(d.a.RestoreAccount)},back(){const t=this.screensHistory.pop();this.activeScreen=t},onExitClick(){const t=this.xButtonAnalyticsEvent[this.activeScreen];t&&A.sendDefaultEvent(t)},async restoreClick(){if(this.isSocialLoginMode)try{await this.moduleAuth.signinBySocial(this.socialName,"?restore=1"),this.onSuccess()}catch(t){this.onError(t.message)}else try{const t=await Object(w.e)({type:"POST",url:Object(C.a)("/auth/simple/login?restore=1"),data:{values:this.dataTologin}});this.formsEventsHandlers[d.a.EmailLogin].onSuccess("email",t)}catch({message:t}){this.formsEventsHandlers[d.a.EmailLogin].onError(t)}}}},M=(n(1243),n(1245),Object(_.a)(z,c,[],!1,null,null,null));M.options.__file="src/Components/Auth/vue/auth.vue";var B=M.exports;r.a.use(l.a);var H={name:"auth-popup",components:{Auth:B},beforeDestroy(){this.$popup.off("close")},methods:{show(t){const e=Object(i.c)(window.__auth_cover_images.split(",")),n=["site_logo",window.__auth_logo_width,window.__auth_logo_height];return new Promise((i,s)=>{this.$popup.open(B,{cover:Object(a.formImageUrl)(e),coverHtml:`<div style="color: ${window.__auth_logo_color}">${Object(o.svgHtml)(...n)}</div>`,maxWidth:640,isFullscreenOnMobile:!0,closeButtonPosition:"inside",props:{onSuccess:i,onError:s,...t}}),this.$popup.on("close",()=>{this.$popup.off("close"),s(new Error("Closed popup without proceeding"))})})},hide(){this.$popup.close()}}},N=Object(_.a)(H,void 0,void 0,!1,null,null,null);N.options.__file="src/Components/Auth/vue/chunk.auth-popup.vue";e.default=N.exports},553:function(t,e,n){"use strict";var i=function(){var t,e=this,n=e.$createElement,i=e._self._c||n;return i(e.url?"a":e.tag,{tag:"component",class:["v-button","v-button--"+e.type,"v-button--size-"+e.size,(t={},t["v-button--mobile-size-"+e.mobileSize]=e.mobileSize,t["v-button--disabled"]=e.disabled,t["ui--bg_loading"]=e.loading,t)],attrs:{href:e.url||!1,target:!(!e.url||!e.newTab)&&"_blank","data-layout-mobile":e.mobileLayout,"data-layout-desktop":e.desktopLayout},on:{click:e.onClick}},[e.icon?i("div",{class:["v-button__icon",{"v-button__icon--new":e.icon.startsWith("v_")}]},[i("icon",{attrs:{name:e.icon,width:e.iconWidth,height:e.iconHeight}})],1):e._e(),e._v(" "),e.$slots.default?i("span",{staticClass:"v-button__label"},[e._t("default")],2):e._e()])};i._withStripped=!0;var a={name:"ui-button",components:{Icon:n(30).a},props:{tag:{type:String,default:"button"},type:{type:String,default:"default",validator:t=>["default","blue","green","red","app","plus","inline"].includes(t)},size:{type:String,default:"default",validator:t=>["large","default","small","tiny"].includes(t)},mobileSize:{type:String,default:""},icon:{type:String,default:""},iconSize:{type:[Number,Array],default:12},url:{type:String,default:""},newTab:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},mobileLayout:{type:Array,default:()=>["icon","label"]},desktopLayout:{type:Array,default:()=>["icon","label"]}},computed:{iconWidth(){return Array.isArray(this.iconSize)?this.iconSize[0]:this.iconSize},iconHeight(){return Array.isArray(this.iconSize)?this.iconSize[1]:this.iconSize}},methods:{onClick(t){this.disabled||("button"!==this.tag||this.url||t.preventDefault(),this.$emit("click",t))}}},o=(n(558),n(14)),s=Object(o.a)(a,i,[],!1,null,null,null);s.options.__file="src/Components/Ui/vue/layout/layout-button.vue";e.a=s.exports},554:function(t,e,n){var i=n(559);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n(29).default)("84b89aea",i,!1,{})},558:function(t,e,n){"use strict";n(554)},559:function(t,e,n){(e=n(28)(!1)).push([t.i,"/**\n * @see src/Components/Ui/styles/buttons.styl\n */\n",""]),t.exports=e},573:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["v-form",{"v-form--loading":t.isLoading}]},[t.title?n("div",{staticClass:"v-form__title"},[t._v("\n    "+t._s(t.title)+"\n  ")]):t._e(),t._v(" "),t.subtitle?n("div",{staticClass:"v-form__subtitle"},[t._v("\n    "+t._s(t.subtitle)+"\n  ")]):t._e(),t._v(" "),n("div",{class:["v-form__content",{"v-form__content--grid":t.grid}]},[t._t("default")],2),t._v(" "),t.$slots.footer?n("div",{staticClass:"v-form__footer"},[t._t("footer")],2):t._e(),t._v(" "),t.$slots.legal?n("div",{staticClass:"v-form__legal"},[t._t("legal")],2):t._e(),t._v(" "),t._t("bottom")],2)};i._withStripped=!0;var a={name:"form",components:{},props:{title:{type:String,default:""},subtitle:{type:String,default:""},grid:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1}},computed:{},methods:{}},o=(n(612),n(14)),s=Object(o.a)(a,i,[],!1,null,null,null);s.options.__file="src/Components/Ui/vue/layout/layout-form.vue";e.a=s.exports},585:function(t,e,n){var i=n(613);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n(29).default)("5421c0ea",i,!1,{})},612:function(t,e,n){"use strict";n(585)},613:function(t,e,n){(e=n(28)(!1)).push([t.i,":root {\n/**\n   * Raw height of the Mobile App bar (without safe-area-inset)\n   */\n  --mobile-bar-height-raw: 50px;\n/**\n   * Height of the Mobile App Bar\n   */\n  --mobile-bar-height: calc(var(--mobile-bar-height-raw) + env(safe-area-inset-bottom));\n/**\n   * Height of the App Redirect block for anon users\n   */\n  --mobile-app-redirect-height: 56px;\n}\n.v-form {\n  --font-size: 15px;\n  font-size: var(--font-size);\n  line-height: 1.5em;\n}\n.v-form--loading input,\n.v-form--loading label {\n  pointer-events: none;\n}\n.v-form--loading input {\n  opacity: 0.75;\n}\n.v-form__title {\n  font-size: 24px;\n  line-height: 1.2em;\n  font-weight: 500;\n  margin-bottom: 18px;\n}\n.v-form__subtitle {\n  margin-bottom: 16px;\n  line-height: 1.5em;\n}\n.v-form__content {\n  --row-gap: 24px;\n}\n.v-form__content--grid {\n  display: grid;\n  -ms-flex-align: start;\n  align-items: start;\n  grid-template-columns: 1fr 1fr;\n  grid-column-gap: 32px;\n  grid-row-gap: var(--row-gap);\n}\n.v-form__content--grid p,\n.v-form__content--grid .v-form-input:not(:nth-child(3)):not(:nth-child(4)),\n.v-form__content--grid .v-form-input-autocomplete:not(:nth-child(3)):not(:nth-child(4)) {\n  grid-column: 1/3;\n}\n.v-form__content:not(.v-form__content--grid) p:not(:last-child),\n.v-form__content:not(.v-form__content--grid) .v-form-input:not(:last-child),\n.v-form__content:not(.v-form__content--grid) .v-form-input-autocomplete:not(:last-child) {\n  margin-bottom: var(--row-gap);\n}\n.v-form__content > .v-form-section:not(:last-child) {\n  margin-bottom: 32px;\n}\n.v-form__content > .v-form-section .v-form-section__field:not(:first-child) {\n  margin-top: 8px;\n}\n.v-form__footer {\n  margin-top: 28px;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n  align-items: center;\n}\n.v-form__footer .ui-button,\n.v-form__footer .v-button {\n  min-width: 124px;\n}\n.v-form__footer .ui-button:last-child,\n.v-form__footer .v-button:last-child {\n  margin-left: auto;\n}\n.v-form__legal {\n  margin-top: 28px;\n  padding-top: 20px;\n  font-size: 12px;\n  line-height: 1.5em;\n  color: #595959;\n  position: relative;\n}\n@media (min-width: 860px) {\n.v-form__legal {\n    margin-bottom: -8px;\n}\n}\n.v-form__legal:before {\n  content: '';\n  display: block;\n  height: 1px;\n  background-color: #f0f0f0;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n}\n@media (max-width: 859px) {\n.v-form__legal:before {\n    left: 0;\n    right: 0;\n}\n}\n.v-form__legal a {\n  border-bottom: 1px solid rgba(89,89,89,0.3);\n}\n.v-form__legal a:hover {\n  color: #cd192e;\n  border-bottom-color: rgba(205,25,46,0.3);\n}\n.v-popup-window .v-form__legal:before {\n  left: -30px;\n  right: -30px;\n}\n@media (max-width: 859px) {\n.v-popup-window .v-form__legal:before {\n    left: -20px;\n    right: -20px;\n}\n}\n",""]),t.exports=e},755:function(t,e,n){"use strict";e.a={Social:"social",EmailLogin:"email-login",EmailRegistration:"email-registration",PasswordRecovery:"password-recovery",PasswordNew:"password-new",Message:"message",LinkSocial:"link-social",SocialRegistration:"social-registration",SocialLogin:"social-login",RestoreAccount:"restore-account"}},862:function(t,e,n){"use strict";function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var a=Object.prototype.hasOwnProperty;var o,s,r,l=(o=!1,s=[],r={resolved:function(){return o},resolve:function(t){if(!o){o=!0;for(var e=0,n=s.length;e<n;e++)s[e](t)}},promise:{then:function(t){o?t():s.push(t)}}},{notify:function(){r.resolve()},wait:function(){return r.promise},render:function(t,e,n){this.wait().then((function(){n(window.grecaptcha.render(t,e))}))},reset:function(t){void 0!==t&&(this.assertLoaded(),this.wait().then((function(){return window.grecaptcha.reset(t)})))},execute:function(t){void 0!==t&&(this.assertLoaded(),this.wait().then((function(){return window.grecaptcha.execute(t)})))},checkRecaptchaLoad:function(){a.call(window,"grecaptcha")&&a.call(window.grecaptcha,"render")&&this.notify()},assertLoaded:function(){if(!r.resolved())throw new Error("ReCAPTCHA has not been loaded")}});"undefined"!=typeof window&&(window.vueRecaptchaApiLoaded=l.notify);var c={name:"VueRecaptcha",props:{sitekey:{type:String,required:!0},theme:{type:String},badge:{type:String},type:{type:String},size:{type:String},tabindex:{type:String},loadRecaptchaScript:{type:Boolean,default:!1},recaptchaScriptId:{type:String,default:"__RECAPTCHA_SCRIPT"},recaptchaHost:{type:String,default:"www.google.com"},language:{type:String,default:""}},beforeMount:function(){if(this.loadRecaptchaScript&&!document.getElementById(this.recaptchaScriptId)){var t=document.createElement("script");t.id=this.recaptchaScriptId,t.src="https://"+this.recaptchaHost+"/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit&hl="+this.language,t.async=!0,t.defer=!0,document.head.appendChild(t)}},mounted:function(){var t=this;l.checkRecaptchaLoad();var e=i({},this.$props,{callback:this.emitVerify,"expired-callback":this.emitExpired,"error-callback":this.emitError}),n=this.$slots.default?this.$el.children[0]:this.$el;l.render(n,e,(function(e){t.$widgetId=e,t.$emit("render",e)}))},methods:{reset:function(){l.reset(this.$widgetId)},execute:function(){l.execute(this.$widgetId)},emitVerify:function(t){this.$emit("verify",t)},emitExpired:function(){this.$emit("expired")},emitError:function(){this.$emit("error")}},render:function(t){return t("div",{},this.$slots.default)}};e.a=c},996:function(t,e,n){var i=n(1236);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n(29).default)("1e47047e",i,!1,{})},997:function(t,e,n){var i=n(1238);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n(29).default)("123f6dc0",i,!1,{})},998:function(t,e,n){var i=n(1240);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n(29).default)("eb43f7a2",i,!1,{})},999:function(t,e,n){var i=n(1242);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n(29).default)("202c599e",i,!1,{})}}]);