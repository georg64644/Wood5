(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{1217:function(t,e,n){"use strict";n(987)},1218:function(t,e,n){(e=n(28)(!1)).push([t.i,":root {\n/**\n   * Raw height of the Mobile App bar (without safe-area-inset)\n   */\n  --mobile-bar-height-raw: 50px;\n/**\n   * Height of the Mobile App Bar\n   */\n  --mobile-bar-height: calc(var(--mobile-bar-height-raw) + env(safe-area-inset-bottom));\n/**\n   * Height of the App Redirect block for anon users\n   */\n  --mobile-app-redirect-height: 56px;\n}\n.v-form-range {\n  display: block;\n}\n.v-form-range .vue-slider {\n  position: relative;\n  height: 4px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.v-form-range .vue-slider-rail {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  background: #f5f5f5;\n  -webkit-box-shadow: inset 0 0.5px 1.5px rgba(0,0,0,0.25);\n  box-shadow: inset 0 0.5px 1.5px rgba(0,0,0,0.25);\n  border-radius: 2px;\n}\n.v-form-range .vue-slider-process {\n  background: #4683d9;\n  z-index: 2;\n}\n.v-form-range .vue-slider-mark {\n  background-color: rgba(0,0,0,0.1);\n}\n.v-form-range .vue-slider-mark:first-child,\n.v-form-range .vue-slider-mark:last-child {\n  opacity: 0;\n}\n.v-form-range .vue-slider-dot {\n  position: absolute;\n}\n.v-form-range .vue-slider-dot-handle {\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  background-color: #fff;\n  -webkit-box-shadow: 0px 2px 1px rgba(0,0,0,0.02), 0px 2.5px 0.5px rgba(0,0,0,0.02), 0px 2px 0.5px rgba(27,27,28,0.03), 0px 1px 0.5px rgba(28,26,26,0.03), 0px 0.5px 1px rgba(28,26,26,0.04), 0px 3px 8px rgba(22,18,18,0.15);\n  box-shadow: 0px 2px 1px rgba(0,0,0,0.02), 0px 2.5px 0.5px rgba(0,0,0,0.02), 0px 2px 0.5px rgba(27,27,28,0.03), 0px 1px 0.5px rgba(28,26,26,0.03), 0px 0.5px 1px rgba(28,26,26,0.04), 0px 3px 8px rgba(22,18,18,0.15);\n}\n.v-form-range .vue-slider-disabled .vue-slider-process {\n  background: #595959;\n}\n",""]),t.exports=e},1219:function(t,e,n){"use strict";n(988)},1220:function(t,e,n){(e=n(28)(!1)).push([t.i,"[data-v-49d39f91]:root {\n/**\n   * Raw height of the Mobile App bar (without safe-area-inset)\n   */\n  --mobile-bar-height-raw: 50px;\n/**\n   * Height of the Mobile App Bar\n   */\n  --mobile-bar-height: calc(var(--mobile-bar-height-raw) + env(safe-area-inset-bottom));\n/**\n   * Height of the App Redirect block for anon users\n   */\n  --mobile-app-redirect-height: 56px;\n}\n.attacher[data-v-49d39f91] {\n  position: relative;\n}\n.attacher--active .attacher__button[data-v-49d39f91] {\n  background-color: #f2f2f2;\n  color: #fff;\n}\n.attacher--active .attacher__form[data-v-49d39f91] {\n  visibility: visible;\n}\n.attacher--disabled[data-v-49d39f91] {\n  pointer-events: none;\n  opacity: 0.5;\n}\n.attacher__button[data-v-49d39f91] {\n  color: #447;\n}\n@media (hover: hover) {\n.attacher__button[data-v-49d39f91]:hover {\n    background-color: #f2f2f2;\n}\n}\n.attacher__form[data-v-49d39f91] {\n  width: 210px;\n  background-color: #fff;\n  border: 1px solid rgba(0,0,0,0.07);\n  -webkit-box-shadow: 0 4px 8px rgba(0,0,0,0.06), inset 0 -1px 0 #fff;\n  box-shadow: 0 4px 8px rgba(0,0,0,0.06), inset 0 -1px 0 #fff;\n  border-radius: 4px;\n  padding: 12px 16px;\n  position: absolute;\n  bottom: 100%;\n  margin-bottom: 12px;\n  left: -7px;\n  visibility: hidden;\n  z-index: 10;\n}\n.attacher__form[data-v-49d39f91]:before {\n  content: '';\n  width: 10px;\n  height: 10px;\n  background-color: #fff;\n  border: solid rgba(0,0,0,0.07);\n  border-width: 0 1px 1px 0;\n  position: absolute;\n  bottom: -6px;\n  left: 17px;\n  -webkit-transform: rotate(45deg);\n  transform: rotate(45deg);\n  pointer-events: none;\n}\n.attacher__input[data-v-49d39f91],\n.attacher__range[data-v-49d39f91] {\n  margin-bottom: 10px;\n}\n.attacher__input[data-v-49d39f91] input {\n  height: 48px;\n  font-size: 24px;\n  text-align: center;\n}\n.attacher__input[data-v-49d39f91] .v-form-input__error {\n  display: none;\n}\n.attacher[data-v-49d39f91] .ui-button {\n  width: 100%;\n}\n",""]),t.exports=e},134:function(t,e,n){"use strict";function a(t,e,n={width:720,height:440}){var a,i=screen.width/2-n.width/2,r=screen.height/2-n.height/2;return a=window.open(t,"displayWindow",`width=${n.width},height=${n.height},left=${i},top=${r},location=no, directories=no,status=no,toolbar=no,menubar=no`),e&&(a.onbeforeunload=function(){e()}),a}n.d(e,"a",(function(){return a}))},196:function(t,e,n){"use strict";function a(t){return t/255}function i(t){const e=function(t){"#"===t.charAt(0)&&(t=t.substr(1));const e=parseInt(t,16);return[e>>16&255,e>>8&255,255&e]}(t).map(a);return.299*e[0]+.587*e[1]+.114*e[2]}function r(t){return i(t)>.5?"#000000":"#ffffff"}n.d(e,"a",(function(){return r}))},230:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isDisabled,expression:"!isDisabled"},{name:"click-outside",rawName:"v-click-outside",value:t.hideForm,expression:"hideForm"}],class:["attacher",{"attacher--active":t.isActive&&!t.isAttached,"attacher--disabled":t.isAttached}]},[n("div",{staticClass:"thesis__attach_something attacher__button",attrs:{"data-gtm":t.metrics.attachDonate},on:{click:t.toggleForm}},[n("icon",{attrs:{name:"v_rouble",width:"20",height:"20"}})],1),t._v(" "),t.isActive&&!t.isAttached?n("div",{staticClass:"attacher__form"},[n("form-input",{ref:"input",staticClass:"attacher__input",attrs:{placeholder:"0 ₽",type:"number",pattern:"[0-9\\s₽]{0,}",error:t.inputError,autofocus:!0,mask:{numeral:!0,numeralPositiveOnly:!0,numeralIntegerScale:4,prefix:" ₽",tailPrefix:!0,noImmediatePrefix:!0,rawValueTrimPrefix:!0,delimiter:"",delimiterLazyShow:!0}},on:{blur:t.onInputBlur,input:t.onTextInput},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}),t._v(" "),n("form-range",{ref:"range",staticClass:"attacher__range",attrs:{min:"100",max:"5000",list:t.rangeValuesList},on:{drag:t.onRangeDrag},model:{value:t.rangeValue,callback:function(e){t.rangeValue=e},expression:"rangeValue"}}),t._v(" "),n("ui-button",{attrs:{size:"small",disabled:!t.isValidValue},on:{click:t.confirmValue}},[n("translate",[t._v("\n        Attach\n      ")])],1)],1):t._e()])};a._withStripped=!0;var i=n(30),r=n(593),o=n(640),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"v-form-range"},[n("vue-slider",{ref:"slider",attrs:{tooltip:"none","dot-size":"20",min:t.min,max:t.max,adsorb:!0,marks:!!t.list.length&&t.list,"hide-label":!0,included:!0,clickable:!1,data:t.list},on:{dragging:t.onDrag,change:t.onInput},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)};s._withStripped=!0;var l=n(986),c={name:"form-range",components:{VueSlider:n.n(l).a},props:{value:{type:[String,Number],default:0},min:{type:Number,default:0},max:{type:Number,default:100},list:{type:Array,default:()=>[]}},computed:{},methods:{onInput(t){this.$emit("input",t)},onDrag(t){this.$emit("drag",t)},setValue(t){this.$refs.slider.setValue(t)}}},u=(n(1217),n(14)),p=Object(u.a)(c,s,[],!1,null,null,null);p.options.__file="src/Components/Ui/vue/form/form-range.vue";var d=p.exports,m=n(87),h=n(23),f=n(10),v=n(0),b=(n(1),n(11)),g=n.n(b),x=n(970);g.a.use(m.a);var _={name:"donate-attacher",components:{Icon:i.a,UiButton:r.a,FormInput:o.a,FormRange:d},props:{metrics:{type:Object,default:()=>{}},uploadedParent:{type:HTMLElement,default:null}},data:()=>({inputValue:150,value:0,rangeValue:150,isActive:!1,rangeValuesList:[100,150,300,500,1e3,5e3],inputError:"",isDisabled:!1}),computed:{isAttached(){return this.value>0},numericValue(){return parseInt(this.inputValue,10)},isValidValue(){return this.numericValue&&this.numericValue<=5e3&&this.numericValue>=100}},created(){this.moduleHawk=Air.import("module.hawk")},beforeDestroy(){this.$root.$off()},methods:{toggleForm(){this.isActive=!this.isActive,this.isActive&&Object(f.sendDefaultEvent)("Donation widget — Show")},hideForm(){this.isActive=!1},confirmValue(){this.isValidValue&&!this.isDisabled&&(this.value=this.numericValue,this.addAttachmentPreview(),this.$emit("change"),this.hideForm(),Object(f.sendDefaultEvent)("Donation widget — Add — Click"))},onTextInput(t){const e=Object(h.b)(t,this.rangeValuesList);this.$refs.range.setValue(e)},onInputBlur(){if(this.isValidValue)this.inputError="";else{const t=this.$gettext("Input the amount between %{ min } and %{ max } roubles");this.inputError=this.$gettextInterpolate(t,{min:100,max:5e3}),this.$refs.input.realignCursor(),this.$notify({type:"error",message:this.inputError})}},onRangeDrag(t){this.$refs.input.setValue(t)},clear(){this.value=0,Object(v.remove)(this.attachmentPreview)},addAttachmentPreview(){this.attachmentPreview=Object(v.parseHTML)(`\n        <div class="donate-attachment">\n          <div class="donate-attachment__sum">\n            ${this.value} ₽\n          </div>\n        </div>`);const t=Object(v.parseHTML)('\n        <button class="donate-attachment__remove">\n          <svg\n            class="icon icon--v_close"\n            width="16"\n            height="16"\n          >\n            <use\n              xmlns:xlink="http://www.w3.org/1999/xlink"\n              xlink:href="#v_close"\n            />\n          </svg>\n        </button>\n      ');t.addEventListener("click",()=>{this.clear(),this.$emit("change")}),this.attachmentPreview.appendChild(t),this.uploadedParent.insertBefore(this.attachmentPreview,this.uploadedParent.firstChild)},setDisabled(t){this.isDisabled=t},processPayment(t){return new Promise((e,n)=>{console.log("[Donate] 2. Processing payment with details",t);this.$popup.open(x.a,{maxWidth:765,cover:!0,props:{store:this.$store,details:t,onSuccess:e,onError:t=>{this.moduleHawk&&this.moduleHawk.catch(t)}}}),this.$popup.on("close",()=>{n(new Error("Payment canceled by user"))})})}}},y=(n(1219),Object(u.a)(_,a,[],!1,null,"49d39f91",null));y.options.__file="src/Components/DonatesTinkoff/vue/attacher/chunk.donate-attacher.vue";e.default=y.exports},594:function(t,e,n){var a=n(649);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(29).default)("26d2cb1b",a,!1,{})},640:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{ref:"label",class:["v-form-input",{"v-form-input--icon":t.icon,"v-form-input--valid":t.isValid,"v-form-input--invalid":!t.isValid,"v-form-input--error":t.error,"v-form-input--disabled":t.disabled,"ui--shake":t.isDrawAttention}]},[t.label?n("div",{staticClass:"v-form-input__label"},[t._v("\n    "+t._s(t.label)+"\n  ")]):t._e(),t._v(" "),n("input",t._b({ref:"input",attrs:{type:"number"===t.type?"text":t.type,inputmode:"number"===t.type&&"numeric",pattern:t.pattern||t.computedPattern,name:t.name,placeholder:t.placeholder,autocomplete:t.autocomplete,disabled:t.disabled,minlength:t.minlength,maxlength:t.maxlength,"data-disable-chars-left":t.isDisableCharsLeft},domProps:{value:t.displayValue},on:{input:function(e){return e.stopPropagation(),e.preventDefault(),t.onInput.apply(null,arguments)},focus:function(e){return e.stopPropagation(),e.preventDefault(),t.onFocus.apply(null,arguments)},blur:function(e){return e.stopPropagation(),e.preventDefault(),t.onBlur.apply(null,arguments)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onEnter.apply(null,arguments)},animationstart:t.checkAutofillAnimation}},"input",t.attributes,!1)),t._v(" "),t.icon?n("icon",{attrs:{name:t.icon,height:"13"}}):t._e(),t._v(" "),t.error?n("div",{staticClass:"v-form-input__error"},[t._v("\n    "+t._s(t.error)+"\n  ")]):t._e(),t._v(" "),t.note?n("div",{staticClass:"v-form-input__note",domProps:{innerHTML:t._s(t.note)}}):t._e()],1)};a._withStripped=!0;var i=n(741),r=n(30);var o={name:"form-input",components:{Icon:r.a},props:{value:{type:[String,Number],default:""},id:{type:[String,Boolean],default:!1},name:{type:[String,Boolean],default:!1},type:{type:String,default:"text"},label:{type:String,default:""},placeholder:{type:[String,Boolean],default:!1},autofocus:{type:Boolean,default:!1},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},minlength:{type:Number,default:0},maxlength:{type:Number,default:2048},pattern:{type:[String,Boolean],default:!1},autocomplete:{type:[String,Boolean],default:!1},mask:{type:Object,default:()=>({})},error:{type:String,default:""},attributes:{type:Object,default:()=>({})},icon:{type:String,default:null},note:{type:String,default:null},isDisableCharsLeft:{type:Boolean,default:!1}},data(){return{displayValue:this.value,isDrawAttention:!1,isValid:!this.required,cleave:null,moduleInputs:null}},computed:{computedPattern(){const t=`{${this.minlength},${this.maxlength}}`;return("number"===this.type?"[0-9\\s]":".")+t}},activated(){this.onComponentMounted()},created(){this.moduleInputs=Air.import("module.inputs")},mounted(){this.onComponentMounted()},beforeDestroy(){this.moduleInputs.destroyVisibleIn(this.$refs.label)},methods:{onComponentMounted(){const{input:t}=this.$refs;this.autofocus&&t.focus(),Object.keys(this.mask).length&&!this.cleave&&(this.cleave=new i.default(t,this.mask),this.realignCursor()),this.isValid=!this.required||""!==t.value.trim()&&t.validity.valid,this.moduleInputs.processVisibleIn(this.$refs.label)},onBlur(){const{input:t}=this.$refs;setTimeout(()=>{this.required&&t&&""!==t.value.trim()&&!t.validity.valid&&(this.isDrawAttention=!0,setTimeout(()=>{this.isDrawAttention=!1},820)),this.$emit("blur",this.isDrawAttention)},0)},onFocus(){this.$emit("focus")},onInput(){const{input:t}=this.$refs;setTimeout(()=>{const e=this.cleave?this.cleave.getRawValue():t.value.trim();this.required?this.isValid=""!==e&&t.validity.valid:this.isValid=!0,this.displayValue=this.cleave?this.cleave.properties.result:t.value,this.realignCursor(),this.$emit("input",e)},10)},onEnter(){this.$emit("submit")},realignCursor(){if(this.cleave&&this.cleave.properties.prefix&&this.cleave.properties.tailPrefix){const{input:t}=this.$refs;t.selectionStart>=t.value.length&&this.setCursor(t.value.length-this.cleave.properties.prefix.length)}},setCursor(t){const{input:e}=this.$refs;setTimeout(()=>{e.focus(),e.setSelectionRange(t,t)},0)},setValue(t,e=!0){const{input:n}=this.$refs;this.cleave?this.cleave.setRawValue(t):n.value=t,setTimeout(()=>{this.required?this.isValid=""!==t&&n.validity.valid:this.isValid=!0,this.displayValue=this.cleave?this.cleave.properties.result:n.value,e&&this.$emit("input",t)},10)},checkAutofillAnimation(t){["onAutoFillStart","onAutoFillEnd"].includes(t.animationName)&&this.onInput()}}},s=(n(648),n(14)),l=Object(s.a)(o,a,[],!1,null,null,null);l.options.__file="src/Components/Ui/vue/form/form-input.vue";e.a=l.exports},648:function(t,e,n){"use strict";n(594)},649:function(t,e,n){(e=n(28)(!1)).push([t.i,":root {\n/**\n   * Raw height of the Mobile App bar (without safe-area-inset)\n   */\n  --mobile-bar-height-raw: 50px;\n/**\n   * Height of the Mobile App Bar\n   */\n  --mobile-bar-height: calc(var(--mobile-bar-height-raw) + env(safe-area-inset-bottom));\n/**\n   * Height of the App Redirect block for anon users\n   */\n  --mobile-app-redirect-height: 56px;\n}\n.v-form-input {\n  display: block;\n}\n.v-form-input__label {\n  margin-bottom: 8px;\n  color: #595959;\n}\n.v-form-input__error {\n  margin-top: 15px;\n  color: #e52e3a;\n}\n.v-form-input__note {\n  margin-top: 8px;\n  font-size: 12px;\n  line-height: 1.33em;\n  color: #595959;\n}\n.v-form-input input {\n  height: 34px;\n  background-color: #fff;\n  border: 1px solid rgba(0,0,0,0.13);\n  border-top-color: rgba(0,0,0,0.29);\n  padding: 0 10px;\n  width: 100%;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  font-size: 15px;\n  line-height: 1.5em;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  outline: 0;\n}\n.v-form-input input::-webkit-input-placeholder {\n  color: #595959;\n}\n.v-form-input input::-moz-placeholder {\n  color: #595959;\n}\n.v-form-input input:-ms-input-placeholder {\n  color: #595959;\n}\n.v-form-input input::-ms-input-placeholder {\n  color: #595959;\n}\n.v-form-input input::placeholder {\n  color: #595959;\n}\n.v-form-input input:focus {\n  border-color: #4683d9;\n}\n.v-form-input--icon {\n  position: relative;\n}\n.v-form-input--icon input {\n  padding-right: 30px;\n}\n.v-form-input--icon .icon {\n  position: absolute;\n  right: 8px;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  color: #595959;\n}\n.v-form-input--error input {\n  border-color: #e52e3a;\n}\n.v-form-input--disabled input {\n  background-color: #f6f6f6;\n  border: 1px solid rgba(0,0,0,0.09);\n}\n.v-form-input-money {\n  margin-top: -8px;\n}\n.v-form-input-money input {\n  height: 48px;\n  font-size: 24px;\n}\n/** Chrome autofill hack  */\n.v-form-input input:-webkit-autofill {\n  -webkit-animation-name: onAutoFillStart;\n  animation-name: onAutoFillStart;\n}\n.v-form-input input:not(:-webkit-autofill) {\n  -webkit-animation-name: onAutoFillEnd;\n  animation-name: onAutoFillEnd;\n}\n@-moz-keyframes onAutoFillStart {\nfrom {\n    opacity: 1;\n}\nto {\n    opacity: 1;\n}\n}\n@-webkit-keyframes onAutoFillStart {\nfrom {\n    opacity: 1;\n}\nto {\n    opacity: 1;\n}\n}\n@-o-keyframes onAutoFillStart {\nfrom {\n    opacity: 1;\n}\nto {\n    opacity: 1;\n}\n}\n@keyframes onAutoFillStart {\nfrom {\n    opacity: 1;\n}\nto {\n    opacity: 1;\n}\n}\n@-moz-keyframes onAutoFillEnd {\nfrom {\n    opacity: 1;\n}\nto {\n    opacity: 1;\n}\n}\n@-webkit-keyframes onAutoFillEnd {\nfrom {\n    opacity: 1;\n}\nto {\n    opacity: 1;\n}\n}\n@-o-keyframes onAutoFillEnd {\nfrom {\n    opacity: 1;\n}\nto {\n    opacity: 1;\n}\n}\n@keyframes onAutoFillEnd {\nfrom {\n    opacity: 1;\n}\nto {\n    opacity: 1;\n}\n}\n",""]),t.exports=e},669:function(t,e,n){var a=n(749);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(29).default)("33741f65",a,!1,{})},748:function(t,e,n){"use strict";n(669)},749:function(t,e,n){(e=n(28)(!1)).push([t.i,":root {\n/**\n   * Raw height of the Mobile App bar (without safe-area-inset)\n   */\n  --mobile-bar-height-raw: 50px;\n/**\n   * Height of the Mobile App Bar\n   */\n  --mobile-bar-height: calc(var(--mobile-bar-height-raw) + env(safe-area-inset-bottom));\n/**\n   * Height of the App Redirect block for anon users\n   */\n  --mobile-app-redirect-height: 56px;\n}\n.v-form-card {\n  position: relative;\n  color: #595959;\n}\n@media (min-width: 860px) {\n.v-form-card {\n    padding-bottom: 40px;\n}\n}\n.v-form-card__debug {\n  display: grid;\n  grid-gap: 10px;\n  -ms-flex-align: center;\n  align-items: center;\n  margin-bottom: 25px;\n}\n@media (min-width: 860px) {\n.v-form-card__debug {\n    grid-template-columns: 1fr 1fr 1fr;\n}\n}\n.v-form-card__debug__title {\n  font-size: 14px;\n  font-weight: 500;\n  color: #000;\n}\n.v-form-card__title {\n  margin-top: 30px;\n  margin-bottom: 15px;\n  font-size: 20px;\n  line-height: 1.2em;\n  font-weight: 500;\n  color: #000;\n}\n.v-form-card__title--small {\n  font-size: 16px;\n  line-height: 1.4em;\n  margin-top: 15px;\n  margin-bottom: 10px;\n}\n.v-form-card__header {\n  height: 20px;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n  align-items: center;\n  -ms-flex-pack: end;\n  justify-content: flex-end;\n  margin-bottom: 50px;\n  margin-right: -15px;\n}\n.v-form-card__header .icon {\n  -ms-flex-negative: 0;\n  flex-shrink: 0;\n  margin-right: 15px;\n}\n.v-form-card__bank {\n  margin-right: auto;\n  font-weight: 500;\n  color: #000;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.v-form-card__front,\n.v-form-card__back {\n  -ms-flex-negative: 0;\n  flex-shrink: 0;\n  width: 300px;\n  height: 195px;\n  padding: 20px;\n  border-radius: 6px;\n}\n.v-form-card__front {\n  background-color: #f0f0ee;\n  -webkit-box-shadow: 0 1px 0 rgba(0,0,0,0.14);\n  box-shadow: 0 1px 0 rgba(0,0,0,0.14);\n  position: relative;\n  z-index: 2;\n}\n@media (max-width: 859px) {\n.v-form-card__front {\n    margin-left: auto;\n    margin-right: auto;\n}\n}\n.v-form-card__back {\n  background-color: #fff;\n  border: 1px solid #e7e7e7;\n  position: absolute;\n  bottom: 0;\n  left: 100px;\n  z-index: 1;\n}\n@media (max-width: 859px) {\n.v-form-card__back {\n    display: none;\n}\n}\n.v-form-card__back:before {\n  content: '';\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='302' height='13' fill='none' viewBox='0 0 302 13'%3E%3Cpath fill='%23C8C8C8' d='M291.935 12.3733c-5.388 0-9.487-2.69385-13.587-5.38769-4.099-2.69384-7.964-5.27055-13-5.27055-5.037 0-8.902 2.57671-13.001 5.27055-4.099 2.69384-8.199 5.38769-13.586 5.38769-5.388 0-9.487-2.69385-13.587-5.38769-4.099-2.69384-7.964-5.27055-13-5.27055s-8.902 2.57671-13.001 5.27055c-4.099 2.69384-8.199 5.38769-13.586 5.38769-5.388 0-9.487-2.69385-13.586-5.38769-4.1-2.69384-7.965-5.27055-13.001-5.27055s-8.902 2.57671-13.001 5.27055c-4.099 2.69384-8.198 5.38769-13.586 5.38769s-9.487-2.69385-13.586-5.38769c-4.1-2.69384-7.965-5.27055-13.001-5.27055s-8.9015 2.57671-13.0008 5.27055c-4.0993 2.69384-8.1987 5.38769-13.5863 5.38769-5.3877 0-9.487-2.69385-13.5863-5.38769-4.0993-2.69384-7.9644-5.27055-13.0007-5.27055s-8.9014 2.57671-13.0007 5.27055c-4.0993 2.69384-8.1986 5.38769-13.5863 5.38769-5.3877 0-9.487-2.69385-13.5863-5.38769C8.37928 4.29177 4.51422 1.71506-.522085 1.71506c-4.099315 0-7.378765 1.75685-10.424015 3.5137l-.4685-.81986C-8.36935 2.53493-4.85565.778076-.522085.778076 4.86559.778076 8.9649 3.47191 13.0642 6.16575c4.0993 2.69383 7.9644 5.27055 13.0007 5.27055s8.9014-2.57672 13.0007-5.27055C43.1649 3.47191 47.2642.778076 52.6519.778076c5.3877 0 9.487 2.693834 13.5863 5.387674 4.0993 2.69383 7.9644 5.27055 13.0007 5.27055s8.9013-2.57672 13.0007-5.27055C96.3389 3.47191 100.438.778076 105.826.778076s9.487 2.693834 13.586 5.387674c4.099 2.69383 7.965 5.27055 13.001 5.27055s8.901-2.57672 13.001-5.27055C149.513 3.47191 153.612.778076 159 .778076c5.387 0 9.487 2.693834 13.586 5.387674 4.099 2.69383 7.965 5.27055 13.001 5.27055s8.901-2.57672 13.001-5.27055c4.099-2.69384 8.198-5.387674 13.586-5.387674 5.387 0 9.487 2.693834 13.586 5.387674 4.099 2.69383 7.964 5.27055 13.001 5.27055 5.036 0 8.901-2.57672 13-5.27055 4.1-2.69384 8.199-5.387674 13.587-5.387674 5.387 0 9.487 2.693834 13.586 5.387674 4.099 2.69383 7.964 5.27055 13.001 5.27055 5.036 0 8.901-2.57672 13-5.27055 4.1-2.69384 8.199-5.387674 13.587-5.387674 4.333 0 7.847 1.756854 10.892 3.630824l-.468.81986c-2.928-1.87397-6.325-3.5137-10.424-3.5137-5.037 0-8.902 2.57671-13.001 5.27055-3.982 2.57671-8.199 5.38769-13.586 5.38769z'/%3E%3C/svg%3E\"), url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='302' height='13' fill='none' viewBox='0 0 302 13'%3E%3Cpath fill='%23C8C8C8' d='M291.935 12.3733c-5.388 0-9.487-2.69385-13.587-5.38769-4.099-2.69384-7.964-5.27055-13-5.27055-5.037 0-8.902 2.57671-13.001 5.27055-4.099 2.69384-8.199 5.38769-13.586 5.38769-5.388 0-9.487-2.69385-13.587-5.38769-4.099-2.69384-7.964-5.27055-13-5.27055s-8.902 2.57671-13.001 5.27055c-4.099 2.69384-8.199 5.38769-13.586 5.38769-5.388 0-9.487-2.69385-13.586-5.38769-4.1-2.69384-7.965-5.27055-13.001-5.27055s-8.902 2.57671-13.001 5.27055c-4.099 2.69384-8.198 5.38769-13.586 5.38769s-9.487-2.69385-13.586-5.38769c-4.1-2.69384-7.965-5.27055-13.001-5.27055s-8.9015 2.57671-13.0008 5.27055c-4.0993 2.69384-8.1987 5.38769-13.5863 5.38769-5.3877 0-9.487-2.69385-13.5863-5.38769-4.0993-2.69384-7.9644-5.27055-13.0007-5.27055s-8.9014 2.57671-13.0007 5.27055c-4.0993 2.69384-8.1986 5.38769-13.5863 5.38769-5.3877 0-9.487-2.69385-13.5863-5.38769C8.37928 4.29177 4.51422 1.71506-.522085 1.71506c-4.099315 0-7.378765 1.75685-10.424015 3.5137l-.4685-.81986C-8.36935 2.53493-4.85565.778076-.522085.778076 4.86559.778076 8.9649 3.47191 13.0642 6.16575c4.0993 2.69383 7.9644 5.27055 13.0007 5.27055s8.9014-2.57672 13.0007-5.27055C43.1649 3.47191 47.2642.778076 52.6519.778076c5.3877 0 9.487 2.693834 13.5863 5.387674 4.0993 2.69383 7.9644 5.27055 13.0007 5.27055s8.9013-2.57672 13.0007-5.27055C96.3389 3.47191 100.438.778076 105.826.778076s9.487 2.693834 13.586 5.387674c4.099 2.69383 7.965 5.27055 13.001 5.27055s8.901-2.57672 13.001-5.27055C149.513 3.47191 153.612.778076 159 .778076c5.387 0 9.487 2.693834 13.586 5.387674 4.099 2.69383 7.965 5.27055 13.001 5.27055s8.901-2.57672 13.001-5.27055c4.099-2.69384 8.198-5.387674 13.586-5.387674 5.387 0 9.487 2.693834 13.586 5.387674 4.099 2.69383 7.964 5.27055 13.001 5.27055 5.036 0 8.901-2.57672 13-5.27055 4.1-2.69384 8.199-5.387674 13.587-5.387674 5.387 0 9.487 2.693834 13.586 5.387674 4.099 2.69383 7.964 5.27055 13.001 5.27055 5.036 0 8.901-2.57672 13-5.27055 4.1-2.69384 8.199-5.387674 13.587-5.387674 4.333 0 7.847 1.756854 10.892 3.630824l-.468.81986c-2.928-1.87397-6.325-3.5137-10.424-3.5137-5.037 0-8.902 2.57671-13.001 5.27055-3.982 2.57671-8.199 5.38769-13.586 5.38769z'/%3E%3C/svg%3E\"), url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='302' height='13' fill='none' viewBox='0 0 302 13'%3E%3Cpath fill='%23C8C8C8' d='M291.935 12.3733c-5.388 0-9.487-2.69385-13.587-5.38769-4.099-2.69384-7.964-5.27055-13-5.27055-5.037 0-8.902 2.57671-13.001 5.27055-4.099 2.69384-8.199 5.38769-13.586 5.38769-5.388 0-9.487-2.69385-13.587-5.38769-4.099-2.69384-7.964-5.27055-13-5.27055s-8.902 2.57671-13.001 5.27055c-4.099 2.69384-8.199 5.38769-13.586 5.38769-5.388 0-9.487-2.69385-13.586-5.38769-4.1-2.69384-7.965-5.27055-13.001-5.27055s-8.902 2.57671-13.001 5.27055c-4.099 2.69384-8.198 5.38769-13.586 5.38769s-9.487-2.69385-13.586-5.38769c-4.1-2.69384-7.965-5.27055-13.001-5.27055s-8.9015 2.57671-13.0008 5.27055c-4.0993 2.69384-8.1987 5.38769-13.5863 5.38769-5.3877 0-9.487-2.69385-13.5863-5.38769-4.0993-2.69384-7.9644-5.27055-13.0007-5.27055s-8.9014 2.57671-13.0007 5.27055c-4.0993 2.69384-8.1986 5.38769-13.5863 5.38769-5.3877 0-9.487-2.69385-13.5863-5.38769C8.37928 4.29177 4.51422 1.71506-.522085 1.71506c-4.099315 0-7.378765 1.75685-10.424015 3.5137l-.4685-.81986C-8.36935 2.53493-4.85565.778076-.522085.778076 4.86559.778076 8.9649 3.47191 13.0642 6.16575c4.0993 2.69383 7.9644 5.27055 13.0007 5.27055s8.9014-2.57672 13.0007-5.27055C43.1649 3.47191 47.2642.778076 52.6519.778076c5.3877 0 9.487 2.693834 13.5863 5.387674 4.0993 2.69383 7.9644 5.27055 13.0007 5.27055s8.9013-2.57672 13.0007-5.27055C96.3389 3.47191 100.438.778076 105.826.778076s9.487 2.693834 13.586 5.387674c4.099 2.69383 7.965 5.27055 13.001 5.27055s8.901-2.57672 13.001-5.27055C149.513 3.47191 153.612.778076 159 .778076c5.387 0 9.487 2.693834 13.586 5.387674 4.099 2.69383 7.965 5.27055 13.001 5.27055s8.901-2.57672 13.001-5.27055c4.099-2.69384 8.198-5.387674 13.586-5.387674 5.387 0 9.487 2.693834 13.586 5.387674 4.099 2.69383 7.964 5.27055 13.001 5.27055 5.036 0 8.901-2.57672 13-5.27055 4.1-2.69384 8.199-5.387674 13.587-5.387674 5.387 0 9.487 2.693834 13.586 5.387674 4.099 2.69383 7.964 5.27055 13.001 5.27055 5.036 0 8.901-2.57672 13-5.27055 4.1-2.69384 8.199-5.387674 13.587-5.387674 4.333 0 7.847 1.756854 10.892 3.630824l-.468.81986c-2.928-1.87397-6.325-3.5137-10.424-3.5137-5.037 0-8.902 2.57671-13.001 5.27055-3.982 2.57671-8.199 5.38769-13.586 5.38769z'/%3E%3C/svg%3E\");\n  background-position: 0 0, 0 4px, 0 8px;\n  opacity: 0.5;\n  z-index: -1;\n}\n.v-form-card__back:after {\n  content: '';\n  display: block;\n  height: 40px;\n  background-color: #c2c2c2;\n  position: absolute;\n  left: -1px;\n  right: -1px;\n  top: 30px;\n}\n.v-form-card__details {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: baseline;\n  align-items: baseline;\n  margin-top: 15px;\n}\n.v-form-card__details label {\n  width: 50px;\n}\n.v-form-card__details label:last-child {\n  width: 55px;\n  margin-left: auto;\n}\n@media (min-width: 860px) {\n.v-form-card__details label:last-child {\n    position: relative;\n    right: -98px;\n}\n}\n.v-form-card__separator {\n  padding: 0 6px;\n}\n.v-form-card__separator:before {\n  content: '/';\n}\n",""]),t.exports=e},752:function(t,e,n){var a=n(861);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(29).default)("0d5a32f8",a,!1,{})},841:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"v-form-card"},[t.isDebug?n("div",{staticClass:"v-form-card__debug"},[n("div",{staticClass:"v-form-card__debug__title"},[n("translate",[t._v("\n        Cards with 3DS:\n      ")])],1),t._v(" "),n("ui-button",{attrs:{type:"8",size:"small"},on:{click:function(e){return t.setDebugData("4242424242424242")}}},[n("translate",[t._v("\n        Successful\n      ")])],1),t._v(" "),n("ui-button",{attrs:{type:"7",size:"small"},on:{click:function(e){return t.setDebugData("4012888888881881")}}},[n("translate",[t._v("\n        Error\n      ")])],1),t._v(" "),n("div",{staticClass:"v-form-card__debug__title"},[n("translate",[t._v("\n        Cards without 3DS:\n      ")])],1),t._v(" "),n("ui-button",{attrs:{type:"8",size:"small"},on:{click:function(e){return t.setDebugData("4111111111111111")}}},[n("translate",[t._v("\n        Successful\n      ")])],1),t._v(" "),n("ui-button",{attrs:{type:"7",size:"small"},on:{click:function(e){return t.setDebugData("4000056655665556")}}},[n("translate",[t._v("\n        Error\n      ")])],1),t._v(" "),n("div",{staticClass:"v-form-card__debug__title"},[n("translate",[t._v("\n        Withdrawal:\n      ")])],1),t._v(" "),n("ui-button",{attrs:{type:"8",size:"small"},on:{click:function(e){return t.setDebugData("5555555555554444")}}},[n("translate",[t._v("\n        Successful\n      ")])],1)],1):t._e(),t._v(" "),n("div",{ref:"form",staticClass:"v-form-card__front",style:{"background-color":t.bank&&t.bank.color.background}},[n("div",{staticClass:"v-form-card__header"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.bank&&t.bank.name,expression:"bank && bank.name"}],staticClass:"v-form-card__bank",style:{color:t.bank&&t.bank.color.text}},[t._v("\n        "+t._s(t.bank?t.bank.name:"")+"\n      ")]),t._v(" "),n("icon",{directives:[{name:"show",rawName:"v-show",value:!t.paymentSystem||"mastercard"===t.paymentSystem,expression:"!paymentSystem || paymentSystem === 'mastercard'"}],attrs:{name:"ui_mastercard",width:"32",height:"20"}}),t._v(" "),n("icon",{directives:[{name:"show",rawName:"v-show",value:!t.paymentSystem||"maestro"===t.paymentSystem,expression:"!paymentSystem || paymentSystem === 'maestro'"}],attrs:{name:"ui_maestro",width:"32",height:"20"}}),t._v(" "),n("icon",{directives:[{name:"show",rawName:"v-show",value:!t.paymentSystem||"visa"===t.paymentSystem,expression:"!paymentSystem || paymentSystem === 'visa'"}],attrs:{name:"ui_visa",width:"38",height:"12"}}),t._v(" "),n("icon",{directives:[{name:"show",rawName:"v-show",value:!t.paymentSystem||"mir"===t.paymentSystem,expression:"!paymentSystem || paymentSystem === 'mir'"}],attrs:{name:"ui_mir",width:"41",height:"12"}})],1),t._v(" "),n("form-input",{ref:"cardInput",attrs:{autocomplete:"cc-number",type:"number",minlength:"19",placeholder:t.cardNumberText,autofocus:!0,required:!0,mask:{creditCard:!0,creditCardStrictMode:!0,delimiterLazyShow:!0},attributes:{"data-cp":"cardNumber"}},on:{input:t.onCardNumberInput},model:{value:t.localFields.number,callback:function(e){t.$set(t.localFields,"number",e)},expression:"localFields.number"}}),t._v(" "),n("div",{staticClass:"v-form-card__details"},[n("form-input",{ref:"monthInput",attrs:{placeholder:"ММ",autocomplete:"cc-exp-month",type:"number",minlength:"2",maxlength:"2",required:!0,mask:{date:!0,datePattern:["m"]},attributes:{"data-cp":"expDateMonth"},"is-disable-chars-left":!0},on:{input:t.onCardFieldInput},model:{value:t.localFields.month,callback:function(e){t.$set(t.localFields,"month",e)},expression:"localFields.month"}}),t._v(" "),n("div",{staticClass:"v-form-card__separator"}),t._v(" "),n("form-input",{ref:"yearInput",attrs:{placeholder:"ГГ",autocomplete:"cc-exp-year",type:"number",minlength:"2",maxlength:"2",required:!0,mask:{date:!0,datePattern:["y"]},attributes:{"data-cp":"expDateYear"},"is-disable-chars-left":!0},on:{input:t.onCardFieldInput},model:{value:t.localFields.year,callback:function(e){t.$set(t.localFields,"year",e)},expression:"localFields.year"}}),t._v(" "),n("form-input",{ref:"cvcInput",attrs:{placeholder:"CVC",autocomplete:"cc-csc",type:"number",minlength:"3",maxlength:"3",required:!0,mask:{numericOnly:!0,blocks:[3]},attributes:{"data-cp":"cvv"},"is-disable-chars-left":!0},on:{input:t.onCardFieldInput},model:{value:t.localFields.cvc,callback:function(e){t.$set(t.localFields,"cvc",e)},expression:"localFields.cvc"}})],1)],1),t._v(" "),n("div",{staticClass:"v-form-card__back"})])};a._withStripped=!0;var i=n(30),r=n(640),o=n(593),s=n(650),l={name:"form-card",components:{Icon:i.a,FormInput:r.a,UiButton:o.a},props:{value:{type:Object,default:null},publicKey:{type:String,default:""}},data(){return{localFields:{number:"",month:"",year:"",cvc:"",...this.value},paymentSystem:"",bank:null,isFormValid:!1,checkout:null,isDebug:window.__debug}},computed:{cardNumberText(){return this.$gettext("Card number")}},mounted(){this.publicKey&&Object(s.b)(this.$refs.form,this.publicKey).then(t=>{this.checkout=t}).catch(t=>{console.error(t)})},methods:{async onCardNumberInput(t){this.onCardFieldInput(),this.paymentSystem=Object(s.d)(t),this.bank=await Object(s.c)(t)},onCardFieldInput(){const t=[this.$refs.cardInput,this.$refs.monthInput,this.$refs.yearInput,this.$refs.cvcInput];for(let e=0,n=t.length;e<n;e+=1){if(!t[e].isValid)return this.isFormValid=!1,void this.$emit("input",null)}this.isFormValid=!0,this.$emit("input",this.localFields)},getCryptogramPacket(){return new Promise((t,e)=>{if(!this.checkout)return void e(new Error("Checkout instance is missing"));const n=this.checkout.createCryptogramPacket();n&&n.success?(this.clearFields(),t(n.packet)):e(new Error("Error creating cryptogram: "+Object.values(n.messages).join(", ")))})},clearFields(){this.$refs.cardInput.setValue(""),this.$refs.monthInput.setValue(""),this.$refs.yearInput.setValue(""),this.$refs.cvcInput.setValue("")},setDebugData(t){this.$refs.cardInput.setValue(t),this.$refs.monthInput.setValue("10"),this.$refs.yearInput.setValue("20"),this.$refs.cvcInput.setValue("000")}}},c=(n(748),n(14)),u=Object(c.a)(l,a,[],!1,null,null,null);u.options.__file="src/Components/Ui/vue/form/form-card.vue";e.a=u.exports},860:function(t,e,n){"use strict";n(752)},861:function(t,e,n){(e=n(28)(!1)).push([t.i,".v-form-card[data-v-75e907d6] {\n  margin-top: 24px;\n}\n.legal[data-v-75e907d6] {\n  display: -ms-flexbox;\n  display: flex;\n}\n.legal[data-v-75e907d6] .icon {\n  margin-left: 30px;\n  -ms-flex-negative: 0;\n  flex-shrink: 0;\n  margin-top: 3px;\n}\n",""]),t.exports=e},970:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"donate-payment"},[n("layout-form",{attrs:{title:t.formTitle,"is-loading":t.isLoading},scopedSlots:t._u([{key:"footer",fn:function(){return[n("ui-button",{attrs:{type:"5"},on:{click:function(e){return t.$emit("close")}}},[n("translate",[t._v("\n          Cancel\n        ")])],1),t._v(" "),n("ui-button",{attrs:{loading:t.isLoading,disabled:t.value<=0||!t.cardData},on:{click:t.confirmCard}},[n("translate",[t._v("\n          Submit\n        ")])],1)]},proxy:!0},{key:"legal",fn:function(){return[n("div",{staticClass:"legal"},[n("p",[n("translate",[t._v("\n            By attaching money to a comment, you agree to all\n          ")]),t._v(" "),n("a",{attrs:{href:"/terms",target:"_blank"}},[n("translate",{attrs:{"translate-context":"To agree to"}},[t._v("\n              terms\n            ")])],1),t._v(" "),n("translate",[t._v("\n            and\n          ")]),t._v(" "),n("a",{attrs:{href:"/agreement",target:"_blank"}},[n("translate",{attrs:{"translate-context":"To agree to"}},[t._v("\n              conditions\n            ")])],1),t._v(" "),n("translate",[t._v("\n            of use of the site.\n          ")])],1),t._v(" "),n("icon",{attrs:{name:"ui_pci",width:"48",height:"30"}})],1)]},proxy:!0}])},[n("layout-receipt",{attrs:{items:t.receiptItems}}),t._v(" "),n("form-card",{ref:"cardForm",attrs:{"public-key":t.details.cp_public},model:{value:t.cardData,callback:function(e){t.cardData=e},expression:"cardData"}})],1)],1)};a._withStripped=!0;var i=n(593),r=n(841),o=n(573),s=n(746),l=n(646),c=n(30),u=n(650),p={name:"donate-payment",components:{UiButton:i.a,FormCard:r.a,LayoutForm:o.a,LayoutReceipt:s.a,Icon:c.a},props:{store:{type:Object,default(){return this.$store||{}}},details:{type:Object,required:!0},onSuccess:{type:Function,default:()=>!1},onError:{type:Function,default:()=>!1}},data(){return{cardData:null,isLoading:!1,formTitle:this.$gettext("Payment by card")}},computed:{receiptItems(){return[{label:this.$gettext("Money attachment"),value:this.details.donate}]}},methods:{async confirmCard(){if(!this.isLoading){this.isLoading=!0;try{const t=await this.$refs.cardForm.getCryptogramPacket(),e=await Object(u.e)({cryptogram:t,paymentUrl:this.details.payment_url,data:{amount:this.details.donate,email:this.details.email,jwt:this.details.jwt}});this.$popup.open(l.a,{maxWidth:460,props:{title:this.$gettext("Payment succeeded"),text:this.$gettext("It's all good, your payment has been attached. You can go back to the comment now and continue the conversation."),type:"success"}}),this.onSuccess(e)}catch(t){console.error(t),this.$popup.open(l.a,{maxWidth:460,props:{title:this.$gettext("An error has occurred"),text:this.$gettext("Something went wrong, but don't worry. You can go back and try again. As a reminder, transfers from foreign banks cards are not supported at the moment."),errorText:t,type:"error"}}),this.onError(t)}this.isLoading=!1}}}},d=(n(860),n(14)),m=Object(d.a)(p,a,[],!1,null,"75e907d6",null);m.options.__file="src/Components/DonatesTinkoff/vue/attacher/donate-payment.vue";e.a=m.exports},987:function(t,e,n){var a=n(1218);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(29).default)("6f631b81",a,!1,{})},988:function(t,e,n){var a=n(1220);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(29).default)("e4ff6910",a,!1,{})}}]);